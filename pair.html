<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E3-WAQAR-MD Pair ‚Äî Cyberpunk</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --neon1:#ff00ff; --neon2:#00ffff; --neon3:#ffcc00;
      --bg:#000; --card:#0b0b0b; --line:#2a2a2a;
    }

    * { box-sizing:border-box; }
    html,body { height:100%; margin:0; }
    body {
      font-family:'Orbitron', system-ui, sans-serif; 
      color:#fff;
      display:grid; 
      place-items:center; 
      padding:24px;
      background: radial-gradient(circle at center, #050505 0%, #000 100%);
      transition: background 0.6s ease, color 0.6s ease;
    }

    body.day {
      background: linear-gradient(135deg, #ffe6ff, #e0ffff, #fff8dc);
      color:#111;
    }

    .card {
      position: relative;
      width:min(680px, 100%);
      background:rgba(0,0,0,0.9);
      border:1px solid #222;
      border-radius:12px;
      padding:24px;
      text-align:center;
      box-shadow: 0 4px 16px rgba(0,0,0,0.6),
                  0 0 10px rgba(0,255,255,0.4);
      transition: background 0.6s ease, color 0.6s ease, box-shadow 0.6s ease;
    }

    body.day .card {
      background:rgba(255,255,255,0.9);
      border:1px solid #ccc;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      color:#000;
    }

    h1 {
      margin:12px 0 18px;
      font-size:clamp(24px, 4.4vw, 36px);
      background:linear-gradient(90deg, var(--neon1), var(--neon2), var(--neon3));
      -webkit-background-clip:text; 
      background-clip:text; 
      -webkit-text-fill-color:transparent;
      text-shadow: 0 0 6px var(--neon1), 0 0 10px var(--neon2), 0 0 14px var(--neon3);
    }

    .rocket { 
      font-size:48px; 
      display:inline-block; 
      animation:bounce 2s infinite ease-in-out; 
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    .stack { 
      display:grid; 
      gap:12px; 
      place-items:center; 
      margin-top:20px;
    }

    input, button {
      width:100%; 
      max-width:480px; 
      padding:12px 14px; 
      font-size:16px; 
      border-radius:8px; 
      font-family:'Orbitron', sans-serif; 
    }

    input {
      background:#111; 
      color:#fff; 
      border:1px solid #444;
      box-shadow: inset 0 0 6px rgba(0,255,255,0.2);
      outline:none;
      transition:border-color .25s ease, box-shadow .25s ease, background 0.6s ease, color 0.6s ease;
    }
    input:focus { border-color:#0ff; box-shadow: 0 0 8px #0ff; }

    body.day input {
      background:#fff;
      color:#000;
      border:1px solid #aaa;
      box-shadow: inset 0 0 4px rgba(0,0,0,0.1);
    }

    button {
      background: linear-gradient(90deg, #ff0077, #00ffee);
      border:none; 
      color:#000; 
      font-weight:700; 
      letter-spacing:.5px; 
      cursor:pointer;
      text-transform: uppercase;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      transition: transform .18s ease, opacity .25s ease;
    }
    button:hover { transform: translateY(-1px); opacity:.9; }

    .output {
      margin-top:16px; 
      background:#111; 
      border:1px solid #333; 
      padding:14px; 
      border-radius:8px; 
      font-size:15px; 
      color:#0ff;
      word-break:break-all;
      display:none;
      transition: background 0.6s ease, color 0.6s ease;
    }

    body.day .output {
      background:#fafafa;
      color:#333;
      border:1px solid #ccc;
    }

    .loading { animation: pulse 1s infinite alternate; }
    @keyframes pulse {
      from { text-shadow: 0 0 6px var(--neon2), 0 0 12px var(--neon3); }
      to { text-shadow: 0 0 14px var(--neon1), 0 0 24px var(--neon2), 0 0 36px var(--neon3); }
    }

    .mode-toggle {
      position:absolute;
      top:16px; right:16px;
      background:#111;
      color:#0ff;
      border:1px solid #333;
      border-radius:20px;
      padding:6px 12px;
      font-size:14px;
      cursor:pointer;
      font-family:'Orbitron', sans-serif;
      transition: background 0.4s ease, color 0.4s ease;
    }
    .mode-toggle:hover { background:#222; }

    body.day .mode-toggle {
      background:#fff;
      color:#333;
      border:1px solid #ccc;
    }

    footer {
      margin-top: 40px;
      text-align: center;
      padding: 20px;
    }
    .footer-text {
      font-family: 'Orbitron', sans-serif;
      font-size: 14px;
      color: #0ff;
      text-shadow: 0 0 5px #0ff, 0 0 15px #0ff, 0 0 30px #ff00ff;
      letter-spacing: 2px;
      transition: color 0.6s ease, text-shadow 0.6s ease;
    }
    body.day .footer-text {
      color:#444;
      text-shadow:none;
    }
  </style>
</head>
<body>
  <button class="mode-toggle" onclick="toggleMode()">üåô Night</button>
  
  <main class="card">
    <div class="rocket">üöÄ</div>
    <h1>E3-WAQAR-MD Pairing</h1>

    <form class="stack" onsubmit="event.preventDefault(); getCode();">
      <input type="text" id="number" placeholder="Enter WhatsApp Number (e.g., 923495178663)" aria-label="WhatsApp number" />
      <button type="submit" aria-label="Generate pairing code">Generate Pair Code</button>
      <div id="result" class="output"></div>
    </form>
  </main>

  <footer>
    <p class="footer-text">Powered by E3-WAQAR-MD¬©</p>
  </footer>

  <script>
    function toggleMode(){
      const body = document.body;
      const btn = document.querySelector('.mode-toggle');
      body.classList.toggle('day');
      if(body.classList.contains('day')){
        btn.textContent = "üåû Day";
      } else {
        btn.textContent = "üåô Night";
      }
    }

    async function getCode(){
      const number = document.getElementById('number').value.trim();
      const resultBox = document.getElementById('result');
      if(!number){ alert('Please enter a valid number.'); return; }
      
      resultBox.style.display='block';
      resultBox.textContent='‚è≥ Generating code, please wait...';
      resultBox.classList.add('loading');

      try{
        const res = await fetch(`/code?number=${encodeURIComponent(number)}`);
        const data = await res.json();
        resultBox.classList.remove('loading');

        if(data.code){ 
          resultBox.textContent = `‚úÖ Pairing Code: ${data.code}`; 
        }
        else if(data.error){ 
          resultBox.textContent = `‚ùå Error: ${data.error}`; 
        }
        else { 
          resultBox.textContent = '‚ö†Ô∏è Unknown response received.'; 
        }
      }catch(err){ 
        resultBox.classList.remove('loading');
        resultBox.textContent = `‚ùå Failed to get code: ${err.message}`; 
      }
    }
  </script>
</body>
</html>
